# 版本 1.0.1 发布说明

本次更新是基于 1.0.0 版本的增量修复与功能增强，主要聚焦于用户体验和核心功能的稳定性。

## 摘要

### 定位与展示
- **选区矩形锚点定位**：优化了浮层定位逻辑，使其更精准地出现在用户选区的下方，而非简单地跟随鼠标点击位置。
- **初始 `display:none` 消除刷新闪现**：修复了在页面加载或刷新时，浮层可能在左上角短暂闪现的问题。
- **仅最新请求更新浮层**：当用户快速连续触发翻译（例如快速划词或双击）时，插件现在只会显示最后一次请求的结果，避免了旧的、过期的翻译结果覆盖最新内容。
- **点击页面外部关闭**：现在点击翻译浮层以外的任何区域，都会自动关闭浮层。
- **点击浮层内部不触发自动弹出**：修复了在浮层内部（例如点击“播放”按钮）时，会错误地触发“划词自动弹出”的问题。

### 划词与双击
- **新增“划词自动弹出”开关**：在设置页面增加了“划词自动弹出”选项，用户可以选择在选中英文文本后是否自动弹出翻译浮层。
- **选区未变化不重复弹窗**：当用户选中一段文本后，如果只是点击页面的非文本区域（此时选区并未改变），浮层将不再反复弹出。
- **双击仍立即弹出**：双击英文单词或短语的行为保持不变，仍会立即触发翻译弹窗。

### 发音
- **加载中/成功/失败都可播放**：无论翻译是否正在进行、成功或失败，只要设置中开启了发音按钮，用户都可以点击播放按钮，通过 TTS（文本转语音）来朗读选中的原文。
- **全大写缩略词逐字母朗读**：对于像 "API"、"TTS" 这样的全大写缩略词，插件现在会按字母逐个朗读（例如 "A P I"），发音更自然。
- **字典有数据时展示音标与可能音频**：当翻译接口返回了音标或真人发音音频时，浮层仍会优先展示这些信息。

### 兼容与权限
- **`all_frames` 注入子 frame**：为 `content_scripts` 启用了 `all_frames: true`，使得插件功能也能在页面的 `iframe` 中生效。
- **`web_accessible_resources` 公开样式与图标**：明确声明了 `overlay.css` 和图标资源，确保 Shadow DOM 能够正确加载样式。
- **Provider 可选 MyMemory 优先**：用户可以在设置中选择“仅 MyMemory”，以绕过可能较慢或不稳定的翻译服务，直接使用 MyMemory 作为首选。

## 如何升级与核对版本

1.  **重新加载扩展**：
    - 在 Chrome 中打开 `chrome://extensions/` 页面。
    - 找到“双击翻译与发音”扩展。
    - 点击扩展卡片右下角的“重新加载”图标（一个旋转的箭头）。
2.  **核对版本号**：
    - 重新加载后，请查看 `manifest.json` 文件（如果是在开发者模式下加载的），或者确认扩展详情页中显示的版本号是否为 **1.0.1**。
