# 双击翻译与发音 (DoubleClick Translate & Pronounce)

这是一款极简的 Chrome 浏览器扩展，让你在阅读网页时，只需双击英文单词、短语或句子，就能即时看到中文翻译和标准发音。

## 主要功能

*   **双击即译**：在任何网页上双击英文，立刻在鼠标附近弹出浮层显示翻译结果。
*   **标准发音**：提供文本朗读（TTS）功能，点击即可播放。对于单个单词，还会额外展示音标和来自词典的真人发音（如果可用）。
*   **轻量无干扰**：浮层采用隔离设计，不会破坏网页原有样式。点击页面空白处或按 `Esc` 键即可关闭。
*   **高度可定制**：支持更换翻译服务、明暗主题、调整朗读语速和音色等。

---

## 安装步骤

由于本扩展尚未发布到 Chrome 网上应用店，你需要通过“开发者模式”手动加载它。过程很简单，只需几步：

1.  **下载并解压**：
    *   首先，下载本扩展的 `.zip` 压缩包。
    *   然后，将它解压到你电脑上一个固定、方便查找的位置（例如，“文档”或“桌面”下的一个新文件夹）。

2.  **打开 Chrome 扩展程序页面**：
    *   在 Chrome 浏览器地址栏输入 `chrome://extensions` 并按回车。
    *   或者，从浏览器右上角的菜单（三个点）选择 “扩展” -> “管理扩展程序”。

3.  **开启“开发者模式”**：
    *   在扩展程序页面的右上角，找到并打开“**开发者模式**”的开关。

4.  **加载已解压的扩展**：
    *   开启后，页面左上方会出现三个新按钮。点击“**加载已解压的扩展程序**”。
    *   在弹出的文件选择窗口中，**找到并选择你刚刚解压的那个文件夹**（例如 `doubleclick-translate-pronounce` 整个文件夹），然后点击“选择文件夹”按钮。

![安装指引](https://raw.githubusercontent.com/user-attachments/assets/9d93a5e3-c247-4148-9366-076eb5c76742)

加载成功后，你会在扩展列表中看到“双击翻译与发音”的卡片，表示安装已完成。现在你可以开始使用了！

---

## 使用方法

安装成功后，无需任何额外设置即可开始使用。

1.  **打开一个包含英文内容的网页**（例如新闻网站、技术博客等）。
2.  **双击你想要翻译的英文内容**：
    *   可以是一个单词，如 `example`。
    *   可以是一个短语，如 `user interface`。
    *   也可以是一个完整的句子，如 `The quick brown fox jumps over the lazy dog.`。
3.  **查看翻译浮层**：
    *   双击后，一个简洁的浮层会出现在你鼠标点击的位置附近。
    *   浮层会显示中文翻译。
    *   点击浮层上的 **喇叭图标** 🔊，可以听到标准的美式或英式英语朗读。
    *   如果双击的是单个单词，浮层还会显示其 **国际音标 (IPA)** 和一个额外的播放按钮（如果词典提供了真人发音音频）。
4.  **关闭浮层**：
    *   点击浮层以外的任何页面区域。
    *   或者，直接按键盘上的 `Esc` 键。

---

## 选项设置

你可以根据自己的偏好调整扩展的行为。右键点击浏览器工具栏上的扩展图标，选择“选项”即可进入设置页面。

*   **翻译服务 (Provider)**：
    *   `自动 (Auto)` (默认)：优先使用速度较快的 LibreTranslate，如果失败，会自动尝试 MyMemory 作为备用。
    *   `仅 LibreTranslate`：只使用 LibreTranslate 服务。
    *   `仅 MyMemory`：只使用 MyMemory 服务。

*   **主题 (Theme)**：
    *   `自动 (Auto)` (默认)：根据你操作系统的亮色/暗色模式自动切换。
    *   `亮色 (Light)`：始终保持亮色界面。
    *   `暗色 (Dark)`：始终保持暗色界面。

*   **朗读语速 (TTS Speech Rate)**：
    *   通过滑块调整，范围从 0.8 (较慢) 到 1.2 (较快)，默认值为 1.0。

*   **朗读音色偏好 (TTS Voice)**：
    *   `自动 (Auto)` (默认)：优先选择浏览器提供的美式 (en-US) 或英式 (en-GB) 发音。
    *   `美式 (en-US)`：强制优先使用美式口音。
    *   `英式 (en-GB)`：强制优先使用英式口音。

---

## 常见问题与排错

*   **Q: 双击了但没有任何反应？**
    *   **A:** 请检查：
        1.  你选择的是否是英文？扩展会自动判断，对于非英文或过短的文本不会触发。
        2.  当前页面是否是特殊页面？例如，在 Chrome 网上应用店、浏览器设置页或某些PDF阅读器中，内容脚本可能无法运行。请尝试在普通新闻或博客网站上测试。
        3.  是否不小心禁用了扩展？请在 `chrome://extensions` 页面检查扩展是否处于开启状态。

*   **Q: 浮层显示“翻译失败，请稍后重试”？**
    *   **A:** 这通常意味着后端的免费翻译服务器暂时不可用或请求过于频繁。你可以尝试：
        1.  等待片刻后重试。
        2.  在“选项”页面切换到另一个翻译服务提供商（例如从 `LibreTranslate` 切换到 `MyMemory`）。

*   **Q: 点击发音按钮没有声音？**
    *   **A:** 可能原因：
        1.  你的操作系统或 Chrome 浏览器没有内置可用的英语语音合成引擎。
        2.  浏览器或系统的音频输出被静音。
        3.  如果针对的是单词，其真人发音音频链接可能已失效。

*   **Q: 为什么有些单词没有显示音标或真人发音？**
    *   **A:** 本扩展依赖免费的词典 API (Free Dictionary API) 来获取音标和发音。这个 API 可能没有收录你查询的单词，或者该单词没有对应的音标/音频数据。在这种情况下，扩展仍会提供基于 TTS 的合成发音。

*   **Q: 如何手动关闭浮层？**
    *   **A:** 点击网页上浮层以外的任何地方，或按键盘上的 `Esc` 键。

---

## 隐私与权限说明

我们高度重视你的隐私安全。

*   **本地工作**：扩展的核心逻辑（如双击监听、浮层展示）完全在你的浏览器本地运行。
*   **有限的网络请求**：只有在你双击英文时，扩展才会向外部服务器发送请求，且仅包含你选择的文本，用于获取翻译和词典数据。我们使用的服务域名包括：
    *   `https://libretranslate.de` (用于翻译)
    *   `https://api.mymemory.translated.net` (用于翻译)
    *   `https://api.dictionaryapi.dev` (用于获取单词音标和发音)
*   **不收集个人信息**：本扩展**不会**收集、存储或传输任何你的个人身份信息、浏览历史或使用习惯。所有设置都保存在你本地的浏览器存储中。

---

## 开源接口与来源说明

本扩展的功能得以实现，离不开以下优秀的免费和开源项目：

*   **翻译服务**：
    *   [**LibreTranslate**](https://libretranslate.de/docs/)：一个开源的机器翻译 API。
    *   [**MyMemory**](https://mymemory.translated.net/doc/spec.php)：一个免费的翻译记忆库 API。
*   **词典服务**：
    *   [**Free Dictionary API**](https://dictionaryapi.dev/)：一个免费的社区驱动词典 API。

**请注意**：由于这些都是公开的免费服务，它们可能会有请求频率限制。在高强度使用下，可能会暂时无法获取结果。请合理使用。

---

## 后续规划

我们计划在未来的版本中加入更多实用的功能，例如：

*   **快捷键支持**：允许自定义快捷键来触发翻译或发音。
*   **一键复制译文**：在浮层中增加一个按钮，快速复制翻译结果。
*   **更多语种支持**：未来可能支持更多语言的互译。
*   **划词翻译**：除了双击，也支持通过鼠标划选文本来触发翻译。
